{
	"$schema": "https://raw.githubusercontent.com/martinring/tmlanguage/master/tmlanguage.json",
	"name": "Mega65 Basic",
	"patterns": [
		{
			"include": "#otherString"
		},	
		{
			"include": "#dos"
		},		
		{
			"include": "#control"
		},			
		{
			"include": "#operators"
		},
		{
			"include": "#graphics"
		},			
		{
			"include": "#draw"
		},
		{
			"include": "#sound"
		},					
		{
			"include": "#other"
		},		
		{
			"include": "#strings"
		},
		{
			"include": "#comments"
		},			
		{
			"include": "#numerics"
		},
		{
			"include": "#vardefs"
		},
		{
			"include": "#func"
		}				
	],
	"repository": {
		"func": {
			"patterns": [{
				"name": "entity.name.function.mega65basic",
				"match": "(def fn|fn)\\s+([a-z0-9]+)",
				"captures": {
					"1": {
						"name": "keyword.control.mega65basic"
					},
					"2": {
						"name": "entity.name.function.mega65basic"
					}
				}
			}]
		},			
		"comments": {
			"patterns": [{
				"name": "comment.line.mega65basic",
				"match": "(rem)(.*)"
			}]
		},
		"vardefs": {
			"patterns": [{
				"name": "storage.modifier.mega65basic",
				"match": "(dim|data|let)"
			}]
		},	
		"numerics": {
			"patterns": [{
				"name": "constant.numeric.mega65basic",
				"match": "([0-9]+)"
			}]
		},
		"dos": {
			"patterns": [{
				"name": "keyword.dos.mega65basic",
				"match": "(append#|backup|bank|bload|bsave|bverify|boot|chdir|close|cmd|collect|concat|cont|copy|catalog|clrbit|clr|directory|dir|disk|dclear|dclose#|dclose|delete|dload|dmode|dopen#|dsave|ds|dt$|go64|help|input#|line input#|lock|mem|merge|mkdir|monitor|mount|new restore|new|open|peek|poke|pot|pointer|print#|record#|rename|resume|rmouse|mouse on|mouse off|rreg|scratch|setbit|set|saveiff|save|sys|disk|def|type|unlock|using|verify|wpeek|wpoke)"
			}]	
		},		
		"draw": {
			"patterns": [{
				"name": "keyword.draw.mega65basic",
				"match": "(box|chardef|char|dot|dpat|rpen|lpen|pen|paint|line|circle|cursor on|cursor off|polygon)"
			}]
		},		
		"graphics": {
			"patterns": [{
				"name": "keyword.graphics.mega65basic",
				"match": "(background|border|bump|rspcolor|color|collision|cut|foreground|load iff|movspr|graphic clr|graphic|scnclr|screen|sprcolor|sprite clr|sprite load|sprite sav|sprsav|rsprite|sprite|sprsav|rsppos|pixel|rpalette|palette|paste|rcolor|rcursor|rgraphic|viewport clr|viewport def|vsync|rwindow|window)"
			}]
		},
		"sound": {
			"patterns": [{
				"name": "keyword.sound.mega65basic",
				"match": "(sound|rplay|play|tempo|vol)"
			}]
		},	
		"control": {
			"patterns": [{
				"name": "keyword.control.mega65basic",
		    	"match": "(begin|bend|do|end|else|exit|for|gosub|goto|if|loop|next|return|step|stop|then|to|while|until)"
			}]
		},			
		"other": {
			"patterns": [{
				"name": "keyword.other.mega65basic",
		    	"match": "(abs|asc|atn|auto|change|clr|cont|cos|data|dec|exp|fre|getkey|get|get#|input|int|len|let|line|list|load|log10|log|mod|new|next|off|on|Ï€|pos|print|read|restore|rnd|run|sgn|sin|sleep|rspeed|speed|spc|sqr|status|st|stop|tab|tan|ti|trap|troff|tron|usr|val|wait)"
			}]
		},
		"otherString": {
			"patterns": [{
				"name": "keyword.otherString.mega65basic",
		    	"begin": "(chr|ds|left|mid|right|str|ti|hex)",
				"end": "\\$"
			}]
		},
		"operators": {
			"patterns": [{
				"name": "keyword.operator.mega65basic",
				"match": "(\\*|/|\\+|-|\\^|=|<>|<|>|<=|=<|>=|=>|and|or|not|xor)"
			}]
		},		
		"strings": {
			"name": "string.quoted.double.mega65basic",
			"begin": "\"",
			"end": "\"",
			"patterns": [
				{
					"name": "constant.character.escape.mega65basic",
					"match": "\\\\."
				}
			]
		}
	},
	"scopeName": "source.mega65basic"
}